#!/bin/bash
Bootstrap: docker
From: ubuntu:22.04 #continuumio/conda-ci-linux-64-python3.8

%post


apt-get update -qq -y
apt-get install -y rsync wget python3 python3-pip git

mkdir /app/
cd /app/
# install Melodia
git clone --recursive https://github.com/rwmontalvao/Melodia.git
cd Melodia/
python3 setup.py install

# install dependencies
pip3 install localpdb pandas nglview seaborn scipy scikit-learn

#install SSAxgeo
cd /app/
git clone https://github.com/labstructbioinf/SSAxgeo.git
cd SSAxgeo/
pip3 install -e ./

%runscript
exec /bin/bash "$@"

%startscript
exec /bin/bash "$@"

%test
    python3 -c "import melodia"
    ssaxgeo -h
    localpdb_setup -h